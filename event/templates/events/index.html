{%extends 'base.html'%}
{% load static %}

{% block 'navigation' %}
{% endblock %}

{%block 'content'%}



<div class="bg-image"></div>

<div class="container-fluid text-center background">
  <div class="row ">

    <!-- Title and Descripiton -->

      <div class="container col-10">
            <h2 class="title-event"  data-aos="fade-up">{{ event.name }}</h2>
            <p class="description-event fs-5 mt-5"  data-aos="fade-up">
                {{ event.description }}
            </p>
      </div>
    </div>
<div class="container col">
  {% for e in event.routes_data.all %}
  <div class="row mt-5" data-aos="fade-up">
  <div class="col-12 mb-3 mb-sm-0">
    <div class="card border-card">
      <div class="card-body">
        <h5 class="card-title border-bottom border-dark-subtle topic-color">{{ e }}</h5>
        <!-- <p class="card-text"></p> -->
        <p></p>
        <p class="card-text"><small class="text-body-secondary">Local de sáida: {{ e.departure_location }}</small></p>
        <p class="card-text"><small class="text-body-secondary">Horário de Concentração: {{ e.concentration }}</small></p>
        <p class="card-text"><small class="text-body-secondary">Horário de saída: {{ e.time }}</small></p>
      </div>
    </div>
  </div>
</div> 
  {% endfor %}

</div>



    


    <!-- Images -->
  <div class="container mt-5">
    <div class="row gx-2 gy-3 content-images">
      {% for image in event.images.all %}
      <div class="img-animation col-lg-4 col-md-3">
          <img src="{{ image.image.url }}" class="rounded img-event" alt="..." data-aos="fade-up">
      </div>
      {% endfor %}
  </div>
</div>
<!-- <div id="carouselExample" class="carousel bg-cric" data-bs-ride="carousel">
  <div class="carousel-inner">
    {% for image in event.images.all %}
      <div class="carousel-item active">
          <div class="card">
              <div class="img-wrapper"><img src="{{ image.image.url }}" class="d-block w-100" alt="..."> </div>
          </div>
      </div>
      {% endfor %}
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
  </button>
</div> -->
</div>
        <!-- Mapa de Rotas do Evento -->

<div class="text-center">
    <h2 class="mb-5 fw-bold topic-color" style="margin-top: 10rem;">
        Mapa das Rotas
    </h2>
    <div id="map" class="mt-3" style="height: 30rem;" data-aos="fade-up"> <!-- Mapa --> </div>

    

  <div class="container mt-5">
    <div class="row justify-content-center flex-wrap">
      {% for e in event.routes_data.all %}
        <div class="col-6 col-md-4 col-lg-3">
          <button data-route="{{ e.route.id_route }}" class="btn btn-outline-dark btnOpacity mt-2 p-3" style="background-color: '{{ e.route.color }}'; width: 100%;">{{ e }}</button>
        </div>
      {% endfor %}
    </div>
  </div>


{% if event.warnings.all %}
  <div class="container-fluid text-center background">
    <div class="row ">
      <!-- Title and Descripiton -->
        <div class="container col-10">
              <div class="text-center">
                <h2 class="mb-5 fw-bold topic-color" data-aos="fade-up" style="margin-top: 5rem;">
                  AVISOS
                </h2>
              </div>
              <div class="row mt-5" data-aos="fade-up">
                  {% for warning in event.warnings.all %}
                  <div class="col-sm-12 mb-3">
                    <div class="card border-card">
                      <div class="card-body">
                        <h5 class="card-title border-bottom border-dark-subtle topic-color">{{ warning.title }}</h5>
                        <p class="card-text"><small class="text-body-secondary">{{ warning.content }}</small></p>
                        <p class="card-text border-top"><small class="text-body-terciary">Postado em: {{ warning.created_date }}</small></p>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
              </div>
        </div>
    </div>
  </div>
{% endif %}



        <!-- Formulario -->

<div class="container mx-auto mb-5 col-10 align-items-center">
  <h2 class="title-event text-center">Formulário para Inscrição ao Evento</h2>
  <form class="bg-light px-5 py-5 col mt-5" id="enrollment-form" method="POST" action="" data-aos="fade-up">
    {% csrf_token %}
    <!-- INPUT NAME -->
    <div class="input-group mb-3">
      <span class="input-group-text"><i class="fa-solid fa-user"></i></span>  
      <input class="form-control" type="text" name="full_name" placeholder="Nome Completo" maxlength="100" required="" id="id_full_name" value="{{ form.full_name.value|default_if_none:''  }}">
    </div>
    <!-- INPUT EMAIL -->
    <div class="input-group mb-3">
      <span class="input-group-text"><i class="fa-solid fa-user"></i></span>  
      <input class="form-control" type="text" name="email" placeholder="Email" maxlength="30" required="" id="id_email" value="{{ form.email.value|default_if_none:''  }}">
    </div>
    <!-- INPUT SOCIAL NETWORK -->
    <div class="input-group mb-3">
      <span class="input-group-text"><i class="fa-brands fa-instagram"></i></span>
      <input class="form-control" type="text" name="social_network" placeholder="Instagram" maxlength="30" id="id_social_network" value="{{ form.social_network.value|default_if_none:''  }}">
    </div>
    <!-- INPUT DATE OF BIRTH -->
    <div class="input-group mb-3">
      <span class="input-group-text"><i class="fa-solid fa-calendar-days"></i></span>   
      <input placeholder="Data de nascimento" required="" class="datepicker form-control" type="text" name="date_of_birth" value="{{ form.date_of_birth.value|default_if_none:''  }}" id="datepicker">
    </div>

   <!-- SELECT BOND CHOICE -->
  <select class="form-select mb-3" name="bond_choice" required id="id_bond_choice">
    <option value selected disabled>Sobre Você</option>
    {% for bond in bond %}
      <option value="{{ bond.id }}">{{ bond }}</option>
    {% endfor %}
  </select>

  <!-- SELECT HOW KNEW -->
  <select class="form-select mb-3" name="how_knew" required id="id_how_knew">
    <option value selected disabled>Como soube?</option>
    {% for howKnew in howKnew %}
      <option value="{{ howKnew.id }}">{{ howKnew }}</option>
    {% endfor %}
  </select>

  <!-- SELECT ROUTE PATH -->
  <select class="form-select mb-3" name="route_path" id="id_route_path" required>
    <option value selected disabled>Caminho da Rota</option>
    {% for routePath in routePath %}
      <option value="{{ routePath.id }}">{{ routePath }}</option>
    {% endfor %}
  </select>

    <!-- INPUT RG -->
    <div class="input-group mb-3">
      <span class="input-group-text"><i class="fa-solid fa-address-card"></i></span>  
      <input class="form-control" type="text" name="rg" placeholder="RG" maxlength="10" required="" id="id_rg" value="{{ form.rg.value|default_if_none:'' }}">
    </div>
<div class="text-center">
  <button class="btn btn-dark mt-5" type="submit">Concluir Inscrição</button>
</div>
{% if form.is_bound and form.errors %}
  <!-- Display form errors -->
  <ul>
    {% for field in form %}
      {% for error in field.errors %}
        <li>{{ error }}</li>
      {% endfor %}
    {% endfor %}
  </ul>
{% endif %}

{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}

</form>  
  </div>
</div>

<script>
      // var multipleCardCarousel = document.querySelector(
      //   "#carouselExample"
      // );
      // if (window.matchMedia("(min-width: 768px)").matches) {
      //   var carousel = new bootstrap.Carousel(multipleCardCarousel, {
      //     interval: false,
      //   });
      //   var carouselWidth = $(".carousel-inner")[0].scrollWidth;
      //   var cardWidth = $(".carousel-item").width();
      //   var scrollPosition = 0;
      //   $("#carouselExample .carousel-control-next").on("click", function () {
      //     if (scrollPosition < carouselWidth - cardWidth * 4) {
      //       scrollPosition += cardWidth;
      //       $("#carouselExample .carousel-inner").animate(
      //         { scrollLeft: scrollPosition },
      //         600
      //       );
      //     }
      //   });
      //   $("#carouselExample .carousel-control-prev").on("click", function () {
      //     if (scrollPosition > 0) {
      //       scrollPosition -= cardWidth;
      //       $("#carouselExample .carousel-inner").animate(
      //         { scrollLeft: scrollPosition },
      //         600
      //       );
      //     }
      //   });
      // } else {
      //   $(multipleCardCarousel).addClass("slide");
      // }
</script>


<script src="{% static 'js/events/data.js'%}" type="module" async></script>
<script src="{% static 'js/map/Polyline.encoded.js' %}"></script>
<script src="{% static 'js/Helpers/verify_form.js' %}"></script>

<script type="text/javascript">
  $(function(){
    $('#datepicker').datepicker();
  })
</script>

{%endblock%}